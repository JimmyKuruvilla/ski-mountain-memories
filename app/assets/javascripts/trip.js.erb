// # Place all the behaviors and hooks related to the matching controller here.
// # All this logic will automatically be available in application.js.
// # You can use CoffeeScript in this file: http://coffeescript.org/

$(function() {

  function initialize() {
    var mapCanvas = document.getElementById('map-canvas');
    var lat = $('#map-canvas').data('lat'); 
    var lng = $('#map-canvas').data('lng');
    var zoom_level = $('#map-canvas').data('zoom');
    var visuals = $('#map-canvas').data('visuals');

    var mapOptions = {
      center: new google.maps.LatLng(lat, lng),
      zoom: zoom_level,
      mapTypeId: google.maps.MapTypeId.HYBRID
    };
    var map = new google.maps.Map(mapCanvas, mapOptions);

    // function addMarker(feature) {
    //     var marker = new google.maps.Marker({
    //       position: feature.position,
    //       icon: feature.type,
    //       map: map
    //     });
    // };

    // var features = [
    //     {
    //       position: new google.maps.LatLng(40.704536, -74.014711),
    //       type: 'http://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Wpdms_20020923b_bowling_green_composite.jpg/250px-Wpdms_20020923b_bowling_green_composite.jpg'
    //     }, {
    //       position: new google.maps.LatLng(40.705585, -74.013434),
    //       type: 'http://revolutionaryday.com/usroute9w/nyc/bwowlinggrn.jpg'
    //     }, {
    //       position: new google.maps.LatLng(39.470746, -106.083668),
    //       type: 'http://www.turnagaintimes.com/current%20issue/2010-02-18/images/cross-country-trails.jpg'
    //     },
    // ];

    // for (var i = 0, feature; feature = features[i]; i++) {
    //     addMarker(feature);
    // };

    function addMarker(visual) {
      var marker = new google.maps.Marker({
        position: new google.maps.LatLng(visual.lat, visual.lng),
        icon: visual.thumbnail_url,
        map: map
      });
    };

    for (var i = 0, visual; visual = visuals[i]; i++) {
      addMarker(visual);
    };
  }


  google.maps.event.addDomListener(window, 'load', initialize);  
})